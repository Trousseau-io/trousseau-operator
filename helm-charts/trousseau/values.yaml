name: vault-kms-provider

k8sDistro: default
namespace: kube-system 

serviceAccount:
  create: true
  name: vault-auth

podSecurityPolicy:
  enabled: false
  annotations: {}

kmsplugin:
  create: true
  name: vault-kms-provider 

trousseau:
  image: 
    registry: ghcr.io
    repository: ondat/trousseau
    tag: v1.1.0
    pullPolicy: IfNotPresent
vaultagent:
  image: 
    repository: vault
    tag: 1.8.6
    pullPolicy: IfNotPresent

securityContext: 
  allowPrivilegeEscalation: false 
  capabilities:
    drop:
    - ALL
  readOnlyRootFilesystem: true
  runAsUser: 0

resources:
  requests:
    cpu: 300m
    memory: 64Mi
  limits: 
    cpu: 300m 
    memory: 256Mi 

tolerations:
  - key: node-role.kubernetes.io/control-plane
    operator: Exists
    effect: NoSchedule
  - key: node-role.kubernetes.io/etcd
    operator: Exists
    effect: NoExecute

affinity:
  nodeAffinity:
    requiredDuringSchedulingIgnoredDuringExecution:
      nodeSelectorTerms:
        - matchExpressions:
            - key: node-role.kubernetes.io/control-plane
              operator: Exists
